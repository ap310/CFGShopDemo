angular.module("public",["public.promotion","public.survey","public.claim","common-authentication","wechat"]).controller("PublicCtrl",["$timeout","$scope","urlConfig","CommonAuthenticationService","Wechat",function(a,k,h,e,b){a(function(){window.loading_screen.finish()},1500);k.redirectToAppState=function(a){void 0===a&&(a="dashboard");a=h.APP_ROOT+"/#/redirect?providerUserId="+b.getOpenId()+"&xAuthToken="+e.getXAuthToken()+"&mobile="+e.getMobile()+"&state="+a;window.location.replace(a)}}]);angular.module("public.claim",["ionic","public.claim.service","wechat"]).controller("PublicClaimCtrl",["$scope","$stateParams","$state","$ionicLoading","$timeout","PublicClaimAPI","$ionicHistory","Wechat","$ionicPopup","$rootScope","$ionicPopover",function(a,k,h,e,b,u,A,r,x,z,E){b(function(){window.loading_screen.finish()},1500);a.navtoroot=function(a,c){A.nextViewOptions({historyRoot:!0});h.go(a,c)};a.openPopover=function(n){a.popover.show(n)};a.closePopover=function(){a.popover.hide()};a.$on("$destroy",
function(){});a.$on("popover.hidden",function(){});a.$on("popover.removed",function(){});a.bigImage=!1;a.Url="#";a.hideBigImage=function(){a.bigImage=!1;a.closePopover()};a.showBigImage=function(n,c){a.Url=n;a.bigImage=!0;a.openPopover(c)};var D=function(n){a.id=n;e.show({template:"<ion-spinner></ion-spinner>",delay:100});u.get(n,function(c){a.claim=c;JSON.stringify(c);void 0!=a.claim.registerno&&""!=a.claim.registerno?(e.hide(),a.showhistoryrecord=!0,a.navtoroot("claimresult",{id:a.claim.id,result:a.claim}),
a.popover=E.fromTemplate('<ion-popover-view style="position: fixed;top: 0;left: 0;z-index: 10; width: 100%;height: 100%;"><ion-content scroll="false"><div id="rightDisplay" ng-if="bigImage" class="popover-backdrop" style="position: fixed;top: 0;left: 0;z-index: 10; width: 100%;height: 100%;" ng-click="hideBigImage()"><img class="img-responsive" style="position: absolute;top: 10%;left: 50%;z-index: 10;display: block;margin-top: 18px; margin-left: -165px;height: 420px;width: 330px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);" src="{{Url}}"/></div></ion-content></ion-popover-view>',
{scope:a})):(a.claim.imgList=[],r.hookShareAll(!1,u.getShareContent(a.claim),function(){},function(a){alert(a)}),e.hide())},function(a){alert("\u83b7\u53d6\u7406\u8d54\u4fe1\u606f\u5931\u8d25\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");e.hide()})},y=null,C=!1;a.getlocation=function(){C=!1;e.show({template:"<ion-spinner></ion-spinner>",delay:100});var n=b(function(){0==C&&(e.hide(),alert("\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25\u8bf7\u7a0d\u540e\u518d\u8bd5"))},6E3);r.getUserLocation(function(c){C=
!0;n&&b.cancel(n);var m=c.latitude;c=c.longitude;var q=new qq.maps.LatLng(m,c);a.claim.gpsAddress="\u7ecf\u5ea6:"+m+"\u7eac\u5ea6:"+c;y.getAddress(q)},function(a){e.hide();alert(a)})};a.previewImage=function(n){r.previewImage(n,a.claim.imgList,function(a){},function(a){alert(a)})};a.beginUpload=function(){if(void 0==a.claim.gpsAddressName||""==a.claim.gpsAddressName)alert("\u8bf7\u70b9\u51fb\u2018\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u2019\u6309\u94ae\uff0c\u8bbe\u7f6e\u5f53\u524d\u4f4d\u7f6e\u4fe1\u606f\uff01");
else if(void 0==a.claim.imgList)alert("\u8bf7\u4f9d\u6b21\u9009\u62e9\u51719\u5f20\u7167\u7247\u8fdb\u884c\u4e0a\u4f20");else{var n=a.claim.imgList.length;9!=n&&alert("\u8bf7\u4f9d\u6b21\u9009\u62e9\u51719\u5f20\u7167\u7247\u8fdb\u884c\u4e0a\u4f20,\u5df2\u4e0a\u4f20"+n+"\u5f20 \u8fd8\u9700"+(9-n)+"\u5f20")}};a.uploadFile=function(n){r.chooseImage(function(c){a.claim.imgList[n]=c.toString();e.show({template:"<ion-spinner></ion-spinner>",delay:100});r.uploadImage(a.claim.imgList[n],function(m){u.downloadFile(a.claim.id,
m,n,function(q){e.hide();a.claim.imgList[n]=q.data;a.$apply()},function(a){e.hide()})},function(a){e.hide()})},function(a){alert(a)})};a.commitClaim=function(){e.show({template:"<ion-spinner></ion-spinner>",delay:100});u.saveClaim(a.claim,function(n){e.hide();a.claim=n.data;a.showhistoryrecord=!1;a.navtoroot("claimresult",{id:a.claim.transactionId,result:a.claim})},function(a){e.hide();alert("\u63d0\u4ea4\u62a5\u6848\u51fa\u73b0\u95ee\u9898\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002")})};z.$on("$stateChangeStart",
function(a,c,m,q,d){if("claimupload"===c.name||"claimresult"===c.name)JSON.stringify(m.result.id),D(m.result.id)});JSON.stringify(k);D(k.id);(function(){y=new qq.maps.Geocoder({complete:function(n){e.hide();a.claim.gpsAddressName=n.detail.addressComponents.province==n.detail.addressComponents.city?n.detail.addressComponents.country+n.detail.addressComponents.province+n.detail.addressComponents.city+n.detail.addressComponents.district+n.detail.addressComponents.street+n.detail.addressComponents.streetNumber:
n.detail.addressComponents.country+n.detail.addressComponents.city+n.detail.addressComponents.district+n.detail.addressComponents.street+n.detail.addressComponents.streetNumber;a.$apply()}})})()}]).controller("PublicClaimListCtrl",["$scope","$stateParams","$state","$ionicLoading","$timeout","PublicClaimAPI","$ionicHistory","Wechat","$ionicPopup",function(a,k,h,e,b,u,A,r,x){b(function(){window.loading_screen.finish()},1500);(function(b){a.id=b.id;e.show({template:"<ion-spinner></ion-spinner>",delay:100});
u.getRecord(b,function(b){JSON.stringify(b);a.claimrecords=b;e.hide()},function(a){alert("error");e.hide()})})(k.id)}]);
angular.module("public.claim.service",["ngResource","wechat"]).service("PublicClaimAPI",["$resource","urlConfig","wechatConstants",function(a,k,h){var e=a(k.REST_END_POINT+"/api/public/claim/query/:id",{id:"@id"},{query:{method:"GET",isArray:!1,timeout:1E4}},null),b=a(k.REST_END_POINT+"/api/public/claim/downloadFile/:Id/:fileId/:fileIndex",{transtionId:"@transtionId",fileId:"@fileId",fileIndex:"@fileIndex"},{query:{method:"GET",isArray:!1,timeout:1E4}},null),u=a(k.REST_END_POINT+"/api/public/claim/save",
null,{save:{method:"POST",isArray:!1,timeout:1E4}},null);return{get:function(a,b,k){e.query({id:a},function(a){b(a.data)},function(a){k(a.error)})},saveClaim:function(a,b,e){u.save(a,function(a){b(a)},function(a){e(a)})},downloadFile:function(a,e,k,h,u){b.query({Id:a,fileId:e,fileIndex:k},function(a){h(a)},function(a){u(a)})},getShareUrl:function(a){return k.APP_ROOT+h.CLAIM_SHARE_ROOT+a},getShareContent:function(a){var b={name:"[\u5927\u5723\u4fdd\u9669]\u7533\u8bf7\u7406\u8d54"};b.description="\u8bf7\u4e0a\u4f20\u4fdd\u5355[\u4fdd\u5355\u53f7:"+
a.policyno+"]\u7406\u8d54\u6240\u9700\u6750\u6599";b.url=this.getShareUrl(a.id);return b}}}]);angular.module("emessage-public","ionic ngCookies angular.filter monospaced.qrcode public wechat redirect templates".split(" ")).constant("urlConfig",{REST_END_POINT:"http://m.baoxian72.com/API",APP_ROOT:"http://m.baoxian72.com"}).run(["$ionicPlatform",function(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0));window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider",
"$urlRouterProvider","$ionicConfigProvider",function(a,k,h){a.state("redirect",{url:"/redirect?providerUserId&mobile&xAuthToken&state&detail",template:"",controller:"RedirectCtrl"}).state("public",{url:"/public",template:'<ion-nav-view name="publicContent" class="public"></ion-nav-view>',controller:"PublicCtrl"}).state("public.promotion",{url:"/promotion/:id",views:{publicContent:{templateUrl:"templates/public/promotion.html",controller:"PublicPromotionCtrl"}}}).state("public.survey",{url:"/survey/:id",
views:{publicContent:{templateUrl:"templates/public/survey.html",controller:"PublicSurveyCtrl"}}}).state("public.claimupload",{url:"/claim/:id",views:{publicContent:{templateUrl:"templates/public/claim.upload.html",controller:"PublicClaimCtrl"}},params:{id:null,result:null}}).state("public.claimresult",{url:"/claim/:id",views:{publicContent:{templateUrl:"templates/public/claim.result.html",controller:"PublicClaimCtrl"}},params:{id:null,result:null}});k.otherwise("/app/agreement/?toPropose=1&paygo=1&private=0");
h.views.transition("none")}]);angular.module("public.promotion",["public.promotion.service","smsValidation"]).controller("PublicPromotionCtrl",["$scope","$stateParams","$state","$ionicLoading","$ionicHistory","PublicPromotionAPI","PublicPromotionConstants","PromotionBackgroundColors","Wechat","CommonAuthenticationService",function(a,k,h,e,b,u,A,r,x,z){a.statusCode={"new":0,waitAuth:1,success:2,error:10};var E=function(a){return void 0!==r[a.toPicId]?{"background-color":r[a.toPicId]}:{"background-color":"#FFF"}},D=function(){e.show({template:"<ion-spinner></ion-spinner>",
delay:100});u.success(a.batch.id,function(b){a.status.code=a.statusCode.success;a.mobile=z.getMobile();e.hide()},function(b){409===b.status?(a.status.code=a.statusCode.success,a.mobile=z.getMobile(),a.batch.isOwner=b.data.isOwner,a.batch.isCollected=b.data.isCollected):alert(b.data.error);e.hide()})};(function(b){a.status={};e.show({template:"<ion-spinner></ion-spinner>",delay:100});u.get(b,function(b){e.hide();a.batch=b;a.batch.isCollected||a.batch.isOwner?(a.status.code=a.statusCode.success,a.mobile=
z.getMobile()):a.status.code=a.statusCode["new"];a.batch.toPicUrl=u.getPicUrl(a.batch.toPicId);a.backStyle=E(a.batch);A.ACTION_COLLECT===a.batch.toAction&&(a.isBindCoupon=!0);x.hookShareAll(!1,u.convertBatchToContent(a.batch),function(){},function(a){alert(a)})},function(b){e.hide();a.status.code=a.statusCode.error;alert(b.data.error)})})(k.id);a.success=function(){z.isLoggedIn()?D():a.status.code=a.statusCode.waitAuth};a.changeMobile=function(){z.quit();a.status.code=a.statusCode.waitAuth;a.batch.isCollected=
!1;a.batch.isOwner=!1}}]);
angular.module("public.promotion.service",["ngResource","wechat"]).constant("PublicPromotionConstants",{ACTION_COLLECT:"COLLECT",PIC_ROOT:"img/promotion/"}).constant("PromotionBackgroundColors",{"16036acd775e970991e0677af90449f4":"#FFF",a3fb6acd775e77af90449f4970991e06:"#FFF",a3fb6acd775e970991e0677af90449f4:"#FFF","16046acd775e970991e0677af90449f4":"#FFF",a3fb6acd775e77af90449f4970991e56:"#FFF"}).service("PublicPromotionAPI",["$resource","urlConfig","PublicPromotionConstants","wechatConstants",function(a,
k,h,e){var b=a(k.REST_END_POINT+"/api/public/marketing/promotion/:batchId/",{batchId:"@batchId"}),u=a(k.REST_END_POINT+"/api/marketing/promotion/batch/:batchId",{batchId:"@batchId"});return{get:function(a,e,k){b.get({batchId:a},function(a){e(a)},function(a){k(a)})},success:function(a,b,e){u.save({batchId:a},function(a){b(a)},function(a){e(a)})},getPicUrl:function(a){return h.PIC_ROOT+a+"_to.jpg"},getShareUrl:function(a){return k.REST_END_POINT+e.PROMOTION_SHARE_ROOT+a},convertBatchToContent:function(a){var b=
{};b.name=a.toTitle;b.description=a.toDescription;b.url=this.getShareUrl(a.id);return b}}}]);angular.module("redirect",["wechat"]).controller("RedirectCtrl",["$stateParams","$state","$ionicHistory","CommonAuthenticationService","Wechat",function(a,k,h,e,b){void 0!==a.providerUserId&&"null"!==a.providerUserId&&b.setOpenId(a.providerUserId);void 0!=a.xAuthToken&&(e.setXAuthToken(a.xAuthToken),e.setMobile(a.mobile));h.nextViewOptions({historyRoot:!0});"promotion"===a.state?k.go("public.promotion",{id:a.detail}):"survey"===a.state?k.go("public.survey",{id:a.detail}):alert("\u670d\u52a1\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u6216\u7a0d\u540e\u518d\u8bd5")}]);angular.module("public.survey",["public.survey.service","public.promotion.service"]).controller("PublicSurveyCtrl",["$scope","$stateParams","$state","$ionicLoading","PublicSurveyAPI","PublicPromotionAPI","$timeout","Wechat","CommonAuthenticationService",function(a,k,h,e,b,u,A,r,x){a.statusCode={"new":0,waitAuth:1,submitted:2,error:10};var z=function(){e.show({template:"<ion-spinner></ion-spinner>",delay:100});b.submit(a.survey.id,a.answers,function(b){a.status.code=a.statusCode.submitted;a.mobile=
x.getMobile();e.hide()},function(b){409===b.status?(a.status.code=a.statusCode.submitted,a.mobile=x.getMobile(),alert("\u60a8\u5df2\u7ecf\u56de\u7b54\u8fc7\u672c\u6708\u95ee\u5377\uff0c\u6bcf\u67081\u65e5\u5237\u65b0\uff0c\u8bf7\u6301\u7eed\u5173\u6ce8~")):alert(b.data.error);e.hide()})};(function(k){a.status={};e.show({template:"<ion-spinner></ion-spinner>",delay:100});b.get(k,function(k){e.hide();a.survey=k;a.survey.answeredBy?(a.status.code=a.statusCode.submitted,a.mobile=x.getMobile()):a.status.code=
a.statusCode["new"];a.survey.promotion.toPicUrl=u.getPicUrl(a.survey.promotion.toPicId);a.answers={};r.hookShareAll(!1,b.getShareContent(a.survey),function(){},function(a){alert(a)})},function(b){e.hide();a.survey=b;a.status.code=a.statusCode.error})})(k.id);a.submit=function(){var b;a:{for(b in a.survey.questions)if((1===a.survey.questions[b].type||2===a.survey.questions[b].type)&&void 0===a.answers[a.survey.questions[b].id]){b=!1;break a}b=!0}b?x.isLoggedIn()?z():a.status.code=a.statusCode.waitAuth:
alert("\u95ee\u5377\u672a\u5b8c\u6210\uff0c\u8bf7\u5b8c\u6210\u7b54\u5377\u518d\u63d0\u4ea4\u3002")};a.changeMobile=function(){x.quit();a.status.code=a.statusCode["new"];a.survey.answeredBy=void 0}}]);
angular.module("public.survey.service",["ngResource","wechat"]).service("PublicSurveyAPI",["$resource","urlConfig","wechatConstants",function(a,k,h){var e=a(k.REST_END_POINT+"/api/public/marketing/survey/:surveyId",{surveyId:"@surveyId"}),b=a(k.REST_END_POINT+"/api/marketing/survey/:surveyId/answer",{surveyId:"@surveyId"});return{get:function(a,b,k){e.get({surveyId:a},function(a){b(a)},function(a){k(a.data)})},submit:function(a,e,k,h){b.save({surveyId:a,answers:e},function(a){k(a)},function(a){h(a)})},
getShareUrl:function(a){return k.APP_ROOT+h.SURVEY_SHARE_ROOT+a},getShareContent:function(a){var b={name:"[\u5927\u5723\u4fdd\u9669]\u7b54\u5377\u6709\u5956"};b.description=a.name;b.url=this.getShareUrl(a.id);return b}}}]);angular.module("common-authentication",["wechat"]).service("CommonAuthenticationService",["$resource","$rootScope","$http","urlConfig","Wechat",function(a,k,h,e,b){var u=a(e.REST_END_POINT+"/sso/userCanRegister/:id",{id:"@id"},{check:{method:"GET",isArray:!1}},null),A=function(a){h.defaults.headers.common["x-auth-token"]=a},r=function(a,k,u,r,C){var n=b.getOpenId();void 0===n&&(n="");void 0==u&&(u="");h.post(e.REST_END_POINT+"/auth","mobile="+a+"&validationCode="+k+"&invitationCode="+u+"&providerUserId="+
n,{ignoreAuthModule:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,m,q,d){A(a.xAuthToken);x=a.mobile;r(a)}).error(function(a,m,q,d){C(a.error)})},x;return{isLoggedIn:function(){return void 0!==h.defaults.headers.common["x-auth-token"]},exist:function(a,b,e){u.check({id:a},b,e)},auth:function(a,b,e,k,C){r(a,b,e,k,C)},quit:function(a){h.post(e.REST_END_POINT+"/sso/quit",{},{ignoreAuthModule:!0})["finally"](function(){delete h.defaults.headers.common["x-auth-token"];
delete x;a()})},setXAuthToken:function(a){A(a)},getXAuthToken:function(){return h.defaults.headers.common["x-auth-token"]},setMobile:function(a){x=a},getMobile:function(){return x},clean:function(){x=h.defaults.headers.common["x-auth-token"]=void 0}}}]);angular.module("ng-iscroll",[]).service("iScrollAccessor",function(){var a;return{set:function(k){a=k},get:function(){return a}}}).directive("iScroll",["iScrollAccessor",function(a){return{restrict:"A",link:function(k,h){var e=new IScroll(h[0],{click:!0,bounce:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/,isContentEditable:/^true$/}});a.set(e);h.on("$destroy",function(){e.destroy();e=null})}}}]).directive("iScrollRefresh",["iScrollAccessor","$timeout",function(a,k){return{restrict:"A",
link:function(h){h.$last&&k(function(){a.get().refresh()})}}}]);var qrcode=function(){function a(e,n){if("undefined"==typeof e.length)throw Error(e.length+"/"+n);var c=function(){for(var a=0;a<e.length&&0==e[a];)a+=1;for(var d=Array(e.length-a+n),f=0;f<e.length-a;f+=1)d[f]=e[f+a];return d}(),m={getAt:function(a){return c[a]},getLength:function(){return c.length},multiply:function(q){for(var d=Array(m.getLength()+q.getLength()-1),f=0;f<m.getLength();f+=1)for(var g=0;g<q.getLength();g+=1)d[f+g]^=b.gexp(b.glog(m.getAt(f))+b.glog(q.getAt(g)));return a(d,0)},mod:function(q){if(0>
m.getLength()-q.getLength())return m;for(var d=b.glog(m.getAt(0))-b.glog(q.getAt(0)),f=Array(m.getLength()),g=0;g<m.getLength();g+=1)f[g]=m.getAt(g);for(g=0;g<q.getLength();g+=1)f[g]^=b.gexp(b.glog(q.getAt(g))+d);return a(f,0).mod(q)}};return m}var k=function(b,n){var c=h[n],m=null,q=0,d=null,f=[],g={},p=function(g,n){for(var t=q=4*b+17,l=Array(t),p=0;p<t;p+=1){l[p]=Array(t);for(var h=0;h<t;h+=1)l[p][h]=null}m=l;k(0,0);k(q-7,0);k(0,q-7);t=e.getPatternPosition(b);for(l=0;l<t.length;l+=1)for(p=0;p<
t.length;p+=1){var h=t[l],B=t[p];if(null==m[h][B])for(var r=-2;2>=r;r+=1)for(var v=-2;2>=v;v+=1)m[h+r][B+v]=-2==r||2==r||-2==v||2==v||0==r&&0==v?!0:!1}for(t=8;t<q-8;t+=1)null==m[t][6]&&(m[t][6]=0==t%2);for(t=8;t<q-8;t+=1)null==m[6][t]&&(m[6][t]=0==t%2);t=e.getBCHTypeInfo(c<<3|n);for(l=0;15>l;l+=1)p=!g&&1==(t>>l&1),6>l?m[l][8]=p:8>l?m[l+1][8]=p:m[q-15+l][8]=p;for(l=0;15>l;l+=1)p=!g&&1==(t>>l&1),8>l?m[8][q-l-1]=p:9>l?m[8][15-l-1+1]=p:m[8][15-l-1]=p;m[q-8][8]=!g;if(7<=b){t=e.getBCHTypeNumber(b);for(l=
0;18>l;l+=1)p=!g&&1==(t>>l&1),m[Math.floor(l/3)][l%3+q-8-3]=p;for(l=0;18>l;l+=1)p=!g&&1==(t>>l&1),m[l%3+q-8-3][Math.floor(l/3)]=p}if(null==d){t=u.getRSBlocks(b,c);l=A();for(p=0;p<f.length;p+=1)h=f[p],l.put(h.getMode(),4),l.put(h.getLength(),e.getLengthInBits(h.getMode(),b)),h.write(l);for(p=h=0;p<t.length;p+=1)h+=t[p].dataCount;if(l.getLengthInBits()>8*h)throw Error("code length overflow. ("+l.getLengthInBits()+">"+8*h+")");for(l.getLengthInBits()+4<=8*h&&l.put(0,4);0!=l.getLengthInBits()%8;)l.putBit(!1);
for(;!(l.getLengthInBits()>=8*h);){l.put(236,8);if(l.getLengthInBits()>=8*h)break;l.put(17,8)}for(var x=0,h=p=0,B=Array(t.length),r=Array(t.length),v=0;v<t.length;v+=1){var y=t[v].dataCount,z=t[v].totalCount-y,p=Math.max(p,y),h=Math.max(h,z);B[v]=Array(y);for(var w=0;w<B[v].length;w+=1)B[v][w]=255&l.getBuffer()[w+x];x+=y;w=e.getErrorCorrectPolynomial(z);y=a(B[v],w.getLength()-1).mod(w);r[v]=Array(w.getLength()-1);for(w=0;w<r[v].length;w+=1)z=w+y.getLength()-r[v].length,r[v][w]=0<=z?y.getAt(z):0}for(w=
l=0;w<t.length;w+=1)l+=t[w].totalCount;l=Array(l);for(w=x=0;w<p;w+=1)for(v=0;v<t.length;v+=1)w<B[v].length&&(l[x]=B[v][w],x+=1);for(w=0;w<h;w+=1)for(v=0;v<t.length;v+=1)w<r[v].length&&(l[x]=r[v][w],x+=1);d=l}t=d;l=-1;p=q-1;h=7;B=0;r=e.getMaskFunction(n);for(v=q-1;0<v;v-=2)for(6==v&&--v;;){for(w=0;2>w;w+=1)null==m[p][v-w]&&(x=!1,B<t.length&&(x=1==(t[B]>>>h&1)),r(p,v-w)&&(x=!x),m[p][v-w]=x,--h,-1==h&&(B+=1,h=7));p+=l;if(0>p||q<=p){p-=l;l=-l;break}}},k=function(a,d){for(var f=-1;7>=f;f+=1)if(!(-1>=a+
f||q<=a+f))for(var g=-1;7>=g;g+=1)-1>=d+g||q<=d+g||(m[a+f][d+g]=0<=f&&6>=f&&(0==g||6==g)||0<=g&&6>=g&&(0==f||6==f)||2<=f&&4>=f&&2<=g&&4>=g?!0:!1)};g.addData=function(a){a=r(a);f.push(a);d=null};g.isDark=function(a,f){if(0>a||q<=a||0>f||q<=f)throw Error(a+","+f);return m[a][f]};g.getModuleCount=function(){return q};g.make=function(){for(var a=0,f=0,d=0;8>d;d+=1){p(!0,d);var m=e.getLostPoint(g);if(0==d||a>m)a=m,f=d}p(!1,f)};g.createTableTag=function(a,f){a=a||2;var d;d='<table style=" border-width: 0px; border-style: none;';
d+=" border-collapse: collapse;";d+=" padding: 0px; margin: "+("undefined"==typeof f?4*a:f)+"px;";d+='">';d+="<tbody>";for(var m=0;m<g.getModuleCount();m+=1){d+="<tr>";for(var b=0;b<g.getModuleCount();b+=1)d+='<td style="',d+=" border-width: 0px; border-style: none;",d+=" border-collapse: collapse;",d+=" padding: 0px; margin: 0px;",d+=" width: "+a+"px;",d+=" height: "+a+"px;",d+=" background-color: ",d+=g.isDark(m,b)?"#000000":"#ffffff",d+=";",d+='"/>';d+="</tr>"}d+="</tbody>";return d+="</table>"};
g.createSvgTag=function(a,d){a=a||2;d="undefined"==typeof d?4*a:d;var f=g.getModuleCount()*a+2*d,m,b,q,c,p;p="l"+a+",0 0,"+a+" -"+a+",0 0,-"+a+"z ";c="<svg"+(' width="'+f+'px"');c+=' height="'+f+'px"';c+=' xmlns="http://www.w3.org/2000/svg"';c+=">";c+='<path d="';for(b=0;b<g.getModuleCount();b+=1)for(q=b*a+d,f=0;f<g.getModuleCount();f+=1)g.isDark(b,f)&&(m=f*a+d,c+="M"+m+","+q+p);c+='" stroke="transparent" fill="black"/>';return c+="</svg>"};g.createImgTag=function(a,d){a=a||2;d="undefined"==typeof d?
4*a:d;var f=g.getModuleCount()*a+2*d,m=d,b=f-d;return y(f,f,function(d,f){return m<=d&&d<b&&m<=f&&f<b?g.isDark(Math.floor((f-m)/a),Math.floor((d-m)/a))?0:1:1})};return g};k.stringToBytes=function(a){for(var b=[],c=0;c<a.length;c+=1){var m=a.charCodeAt(c);b.push(m&255)}return b};k.createStringToBytes=function(a,b){var c=function(){for(var m=E(a),q=function(){var a=m.read();if(-1==a)throw Error();return a},d=0,f={};;){var g=m.read();if(-1==g)break;var c=q(),e=q(),h=q(),g=String.fromCharCode(g<<8|c);
f[g]=e<<8|h;d+=1}if(d!=b)throw Error(d+" != "+b);return f}();return function(a){for(var b=[],d=0;d<a.length;d+=1){var f=a.charCodeAt(d);128>f?b.push(f):(f=c[a.charAt(d)],"number"==typeof f?(f&255)==f?b.push(f):(b.push(f>>>8),b.push(f&255)):b.push(63))}return b}};var h={L:1,M:0,Q:3,H:2},e=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,
90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n={},c=function(a){for(var b=0;0!=a;)b+=1,a>>>=1;return b};n.getBCHTypeInfo=function(a){for(var b=
a<<10;0<=c(b)-c(1335);)b^=1335<<c(b)-c(1335);return(a<<10|b)^21522};n.getBCHTypeNumber=function(a){for(var b=a<<12;0<=c(b)-c(7973);)b^=7973<<c(b)-c(7973);return a<<12|b};n.getPatternPosition=function(a){return e[a-1]};n.getMaskFunction=function(a){switch(a){case 0:return function(a,d){return 0==(a+d)%2};case 1:return function(a,d){return 0==a%2};case 2:return function(a,d){return 0==d%3};case 3:return function(a,d){return 0==(a+d)%3};case 4:return function(a,d){return 0==(Math.floor(a/2)+Math.floor(d/
3))%2};case 5:return function(a,d){return 0==a*d%2+a*d%3};case 6:return function(a,d){return 0==(a*d%2+a*d%3)%2};case 7:return function(a,d){return 0==(a*d%3+(a+d)%2)%2};default:throw Error("bad maskPattern:"+a);}};n.getErrorCorrectPolynomial=function(m){for(var c=a([1],0),d=0;d<m;d+=1)c=c.multiply(a([1,b.gexp(d)],0));return c};n.getLengthInBits=function(a,b){if(1<=b&&10>b)switch(a){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>b)switch(a){case 1:return 12;
case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+a);}else if(41>b)switch(a){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+a);}else throw Error("type:"+b);};n.getLostPoint=function(a){for(var b=a.getModuleCount(),d=0,f=0;f<b;f+=1)for(var g=0;g<b;g+=1){for(var c=0,n=a.isDark(f,g),e=-1;1>=e;e+=1)if(!(0>f+e||b<=f+e))for(var h=-1;1>=h;h+=1)0>g+h||b<=g+h||0==e&&0==h||n!=a.isDark(f+e,g+h)||(c+=1);5<c&&(d+=3+c-5)}for(f=0;f<b-
1;f+=1)for(g=0;g<b-1;g+=1)if(c=0,a.isDark(f,g)&&(c+=1),a.isDark(f+1,g)&&(c+=1),a.isDark(f,g+1)&&(c+=1),a.isDark(f+1,g+1)&&(c+=1),0==c||4==c)d+=3;for(f=0;f<b;f+=1)for(g=0;g<b-6;g+=1)a.isDark(f,g)&&!a.isDark(f,g+1)&&a.isDark(f,g+2)&&a.isDark(f,g+3)&&a.isDark(f,g+4)&&!a.isDark(f,g+5)&&a.isDark(f,g+6)&&(d+=40);for(g=0;g<b;g+=1)for(f=0;f<b-6;f+=1)a.isDark(f,g)&&!a.isDark(f+1,g)&&a.isDark(f+2,g)&&a.isDark(f+3,g)&&a.isDark(f+4,g)&&!a.isDark(f+5,g)&&a.isDark(f+6,g)&&(d+=40);for(g=c=0;g<b;g+=1)for(f=0;f<b;f+=
1)a.isDark(f,g)&&(c+=1);return d+=Math.abs(100*c/b/b-50)/5*10};return n}(),b=function(){for(var a=Array(256),b=Array(256),c=0;8>c;c+=1)a[c]=1<<c;for(c=8;256>c;c+=1)a[c]=a[c-4]^a[c-5]^a[c-6]^a[c-8];for(c=0;255>c;c+=1)b[a[c]]=c;return{glog:function(a){if(1>a)throw Error("glog("+a+")");return b[a]},gexp:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return a[b]}}}(),u=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,
13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],
[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,
142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],
[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,
16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,
153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b=function(a,d){var b={};b.totalCount=a;b.dataCount=d;return b},c={},m=function(b,d){switch(d){case h.L:return a[4*(b-1)+0];case h.M:return a[4*(b-1)+1];case h.Q:return a[4*(b-1)+2];case h.H:return a[4*(b-1)+3]}};c.getRSBlocks=function(a,d){var f=m(a,d);if("undefined"==
typeof f)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+d);for(var c=f.length/3,e=[],h=0;h<c;h+=1)for(var k=f[3*h+0],r=f[3*h+1],t=f[3*h+2],l=0;l<k;l+=1)e.push(b(r,t));return e};return c}(),A=function(){var a=[],b=0,c={getBuffer:function(){return a},getAt:function(b){return 1==(a[Math.floor(b/8)]>>>7-b%8&1)},put:function(a,b){for(var d=0;d<b;d+=1)c.putBit(1==(a>>>b-d-1&1))},getLengthInBits:function(){return b},putBit:function(c){var e=Math.floor(b/8);a.length<=e&&a.push(0);c&&(a[e]|=
128>>>b%8);b+=1}};return c},r=function(a){var b=k.stringToBytes(a);return{getMode:function(){return 4},getLength:function(a){return b.length},write:function(a){for(var e=0;e<b.length;e+=1)a.put(b[e],8)}}},x=function(){var a=[],b={writeByte:function(b){a.push(b&255)},writeShort:function(a){b.writeByte(a);b.writeByte(a>>>8)},writeBytes:function(a,e,h){e=e||0;h=h||a.length;for(var d=0;d<h;d+=1)b.writeByte(a[d+e])},writeString:function(a){for(var e=0;e<a.length;e+=1)b.writeByte(a.charCodeAt(e))},toByteArray:function(){return a},
toString:function(){var b;b="[";for(var e=0;e<a.length;e+=1)0<e&&(b+=","),b+=a[e];return b+"]"}};return b},z=function(){var a=0,b=0,c=0,e="",h={},d=function(a){if(!(0>a)){if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw Error("n:"+a);};h.writeByte=function(f){a=a<<8|f&255;b+=8;for(c+=1;6<=b;)e+=String.fromCharCode(d(a>>>b-6&63)),b-=6};h.flush=function(){0<b&&(e+=String.fromCharCode(d(a<<6-b&63)),b=a=0);if(0!=c%3)for(var f=3-c%3,g=0;g<
f;g+=1)e+="="};h.toString=function(){return e};return h},E=function(a){var b=0,c=0,e=0,h=function(a){if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-97+26;if(48<=a&&57>=a)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw Error("c:"+a);};return{read:function(){for(;8>e;){if(b>=a.length){if(0==e)return-1;throw Error("unexpected end of file./"+e);}var d=a.charAt(b);b+=1;if("="==d)return e=0,-1;d.match(/^\s$/)||(c=c<<6|h(d.charCodeAt(0)),e+=6)}d=c>>>e-8&255;e-=8;return d}}},D=function(a,
b){var c=Array(a*b),e=function(a){var b=0,g=0;return{write:function(c,e){if(0!=c>>>e)throw Error("length over");for(;8<=b+e;)a.writeByte(255&(c<<b|g)),e-=8-b,c>>>=8-b,b=g=0;g|=c<<b;b+=e},flush:function(){0<b&&a.writeByte(g)}}},h=function(){var a={},b=0,g={add:function(c){if(g.contains(c))throw Error("dup key:"+c);a[c]=b;b+=1},size:function(){return b},indexOf:function(b){return a[b]},contains:function(b){return"undefined"!=typeof a[b]}};return g};return{setPixel:function(b,f,g){c[f*a+b]=g},write:function(d){d.writeString("GIF87a");
d.writeShort(a);d.writeShort(b);d.writeByte(128);d.writeByte(0);d.writeByte(0);d.writeByte(0);d.writeByte(0);d.writeByte(0);d.writeByte(255);d.writeByte(255);d.writeByte(255);d.writeString(",");d.writeShort(0);d.writeShort(0);d.writeShort(a);d.writeShort(b);d.writeByte(0);var f;f=3;for(var g=h(),p=0;4>p;p+=1)g.add(String.fromCharCode(p));g.add(String.fromCharCode(4));g.add(String.fromCharCode(5));var p=x(),k=e(p);k.write(4,f);for(var r=0,u=String.fromCharCode(c[r]),r=r+1;r<c.length;){var t=String.fromCharCode(c[r]),
r=r+1;g.contains(u+t)?u+=t:(k.write(g.indexOf(u),f),4095>g.size()&&(g.size()==1<<f&&(f+=1),g.add(u+t)),u=t)}k.write(g.indexOf(u),f);k.write(5,f);k.flush();f=p.toByteArray();d.writeByte(2);for(g=0;255<f.length-g;)d.writeByte(255),d.writeBytes(f,g,255),g+=255;d.writeByte(f.length-g);d.writeBytes(f,g,f.length-g);d.writeByte(0);d.writeString(";")}}},y=function(a,b,c,e){for(var h=D(a,b),d=0;d<b;d+=1)for(var f=0;f<a;f+=1)h.setPixel(f,d,c(f,d));c=x();h.write(c);h=z();c=c.toByteArray();for(d=0;d<c.length;d+=
1)h.writeByte(c[d]);h.flush();c='<img src="';c+="data:image/gif;base64,";c+=h;c+='"';c+=' width="';c+=a;c+='"';c+=' height="';c+=b;c+='"';e&&(c+=' alt="',c+=e,c+='"');return c+="/>"};return k}();(function(a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports&&(module.exports=a())})(function(){return qrcode});
(function(a){a.stringToBytes=function(a){for(var h=[],e=0;e<a.length;e++){var b=a.charCodeAt(e);128>b?h.push(b):2048>b?h.push(192|b>>6,128|b&63):55296>b||57344<=b?h.push(224|b>>12,128|b>>6&63,128|b&63):(e++,b=65536+((b&1023)<<10|a.charCodeAt(e)&1023),h.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|b&63))}return h}})(qrcode);angular.module("smsValidation",["ngResource","common-authentication"]).directive("smsValidation",["$ionicLoading","smsValidationAPI","$interval","CommonAuthenticationService",function(a,k,h,e){return{restrict:"E",scope:{presetInvitationCode:"=presetInvitationCode",success:"&onSuccess"},templateUrl:"templates/common/sms.validation.html",link:function(b){b.statusCode={waitMobile:0,waitCode:1};b.status=b.statusCode.waitMobile;b.showInvitationCode=!1;var u,A=function(a){b.count=60;angular.isDefined(u)||
(u=h(function(){1<b.count?--b.count:(angular.isDefined(u)&&(h.cancel(u),u=void 0),a())},1E3))},r=function(){a.show({template:"<ion-spinner></ion-spinner>",delay:100});k.send(b.mobile,b.captcha,function(){a.hide();b.status=b.statusCode.waitCode;A(function(){b.status===b.statusCode.waitCode&&(b.status.code=b.statusCode.waitMobile)})},function(e){a.hide();b.refreshCaptcha();b.captcha=void 0;alert(e.data.error)})};b.sendSmsValidation=function(){void 0===b.mobile?alert("\u8bf7\u6b63\u786e\u8f93\u5165\u624b\u673a\u53f7"):
void 0===b.captcha?alert("\u8bf7\u6b63\u786e\u8f93\u5165\u56fe\u7247\u9a8c\u8bc1\u7801"):r()};b.refreshCaptcha=function(){b.showCaptcha=!0;void 0!==b.mobile&&(b.captchaUrl=k.getCaptchaUrl(b.mobile))};b.checkExist=function(){b.showInvitationCode=!1;void 0!==b.mobile&&e.exist(b.mobile,function(){b.showInvitationCode=!1},function(){b.showInvitationCode=!0})};b.auth=function(){e.auth(b.mobile,b.validationCode,void 0!==b.presetInvitationCode?b.presetInvitationCode:b.invitationCode,function(a){b.success()},
function(a){alert(a)})}}}}]).service("smsValidationAPI",["$resource","urlConfig",function(a,k){var h=a(k.REST_END_POINT+"/sso/smsValidate",{phoneNumber:"@phoneNumber",captcha:"@captcha"},{send:{method:"POST",isArray:!1}},null);return{send:function(a,b,k,A){h.send({phoneNumber:a,captcha:b},function(){k()},function(a){A(a)})},getCaptchaUrl:function(a){return k.REST_END_POINT+"/sso/captcha?phoneNumber="+a+"&time="+(new Date).getTime()}}}]);angular.module("wechat",["wechat.service"]);
angular.module("wechat.service",[]).constant("wechatConstants",{SHARE_IMG_URL:"img/promotion/share.png",TIMELINE_IMG_URL:"img/promotion/share.png",PROMOTION_SHARE_ROOT:"/wechatlogin/oauth2?state=promotion:",SURVEY_SHARE_ROOT:"/wechatlogin/oauth2?state=survey:",CLAIM_SHARE_ROOT:"/#/claim/"}).service("Wechat",["urlConfig","$resource","$location","wechatConstants",function(a,k,h,e){var b,u=k(a.REST_END_POINT+"/api/wechat/config",{url:"@url"}),A=k(a.REST_END_POINT+"/wechatlogin/oauth2/bind",{openId:"@openId"}),
r=function(a,b,g){var c=new u;a=a?h.protocol()+"://"+h.host()+"/":h.absUrl();c.$get({url:a},function(a){q=a;console.log("refresh wechat mp config success");b()},function(a){q=void 0;console.log("refresh wechat mp config error by: "+a.data.error);g(a)})},x=function(a,b,c){wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){b(a.localIds)}})},z=function(a,b,c){wx.uploadImage({localId:a,isShowProgressTips:1,success:function(a){b(a.serverId)}})},E=function(a,
b,c){wx.getLocation({type:"gcj02",success:function(a){b(a)},cancel:function(a){c(a)}})},D=function(a,b,c,e){wx.previewImage({current:b[a],urls:b})},y=function(a,b,c,e){wx.config({debug:!1,appId:q.appId,timestamp:q.timestamp,nonceStr:q.noncestr,signature:q.signature,jsApiList:"onMenuShareAppMessage onMenuShareTimeline chooseWXPay chooseImage uploadImage getLocation previewImage hideMenuItems".split(" ")});wx.ready(function(){a(b,c,e)})},C=function(b,f,c,h){b&&wx.hideMenuItems({menuList:["menuItem:share:appMessage"]});
wx.onMenuShareAppMessage({title:f.name,desc:f.description,link:f.url,imgUrl:a.APP_ROOT+"/"+e.SHARE_IMG_URL,trigger:function(a){},success:function(a){c()},cancel:function(a){h("\u5df2\u53d6\u6d88\u5206\u4eab")},fail:function(a){h("\u5206\u4eab\u5931\u8d25")}});wx.onMenuShareTimeline({title:f.name,link:f.url,imgUrl:a.APP_ROOT+"/"+e.TIMELINE_IMG_URL,trigger:function(a){},success:function(a){c()},cancel:function(a){h("\u5df2\u53d6\u6d88\u5206\u4eab")},fail:function(a){h("\u5206\u4eab\u5931\u8d25")}})},
n=function(a,b,c){C(!0,a,b,c)},c=function(a,b,c){C(!1,a,b,c)},m=function(a,b,c){wx.chooseWXPay({timestamp:a.timeStamp+"",nonceStr:a.nonceStr,"package":a.packagePrepayId,signType:a.signType,paySign:a.paySign,success:function(a){b()},fail:function(a){c()},cancel:function(a){c()}})},q;return{hookShareAll:function(a,b,e,h){void 0===q?r(a,function(){y(c,b,e,h)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):y(c,b,e,h)},hookShareTimelineOnly:function(a,
b,c,e){void 0===q?r(a,function(){y(n,b,c,e)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):y(n,b,c,e)},doWxPay:function(a,b,c){void 0===q?r(!0,function(){y(m,a,b,c)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):y(m,a,b,c)},chooseImage:function(a,b){void 0===q?r(!0,function(){y(x,"",a,b)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):
y(x,"",a,b)},previewImage:function(a,b,c,e){void 0===q?r(!0,function(){y(D,a,b,c,e)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):y(D,a,b,c,e)},getUserLocation:function(a,b){void 0===q?r(!0,function(){y(E,"",a,b)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):y(E,"",a,b)},uploadImage:function(a,b,c){void 0===q?r(!0,function(){y(z,a,b,c)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):
y(z,a,b,c)},isQQBrowser:function(){return-1!==navigator.userAgent.indexOf("MQQBrowser")},bind:function(a,b,c){(new A).$save({openId:a},b,function(a){c(a.data.error)})},getOpenId:function(){return b},setOpenId:function(a){b=a}}}]);
