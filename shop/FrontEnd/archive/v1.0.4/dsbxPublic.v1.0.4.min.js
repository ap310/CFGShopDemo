angular.module("public",["public.promotion","public.survey","public.claim","common-authentication","wechat"]).controller("PublicCtrl",["$timeout","$scope","urlConfig","CommonAuthenticationService","Wechat",function(a,h,n,f,b){a(function(){window.loading_screen.finish()},1500);h.redirectToAppState=function(a){void 0===a&&(a="dashboard");a=n.APP_ROOT+"/#/redirect?providerUserId="+b.getOpenId()+"&xAuthToken="+f.getXAuthToken()+"&mobile="+f.getMobile()+"&state="+a;window.location.replace(a)}}]);angular.module("public.claim",["ionic","public.claim.service","wechat"]).controller("PublicClaimCtrl",["$scope","$stateParams","$state","$ionicLoading","$timeout","PublicClaimAPI","$ionicHistory","Wechat","$ionicPopup","$rootScope","$ionicPopover",function(a,h,n,f,b,v,A,w,y,B,F){b(function(){window.loading_screen.finish()},1500);a.navtoroot=function(a,k){A.nextViewOptions({historyRoot:!0});n.go(a,k)};a.openPopover=function(l){a.popover.show(l)};a.closePopover=function(){a.popover.hide()};a.$on("$destroy",
function(){});a.$on("popover.hidden",function(){});a.$on("popover.removed",function(){});a.bigImage=!1;a.Url="#";a.hideBigImage=function(){a.bigImage=!1;a.closePopover()};a.showBigImage=function(l,k){a.Url=l;a.bigImage=!0;a.openPopover(k)};var E=function(l){a.id=l;f.show({template:"<ion-spinner></ion-spinner>",delay:100});v.get(l,function(k){a.claim=k;JSON.stringify(k);void 0!=a.claim.registerno&&""!=a.claim.registerno?(f.hide(),a.showhistoryrecord=!0,a.navtoroot("claimresult",{id:a.claim.id,result:a.claim}),
a.popover=F.fromTemplate('<ion-popover-view style="position: fixed;top: 0;left: 0;z-index: 10; width: 100%;height: 100%;"><ion-content scroll="false"><div id="rightDisplay" ng-if="bigImage" class="popover-backdrop" style="position: fixed;top: 0;left: 0;z-index: 10; width: 100%;height: 100%;" ng-click="hideBigImage()"><img class="img-responsive" style="position: absolute;top: 10%;left: 50%;z-index: 10;display: block;margin-top: 18px; margin-left: -165px;height: 420px;width: 330px; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);" src="{{Url}}"/></div></ion-content></ion-popover-view>',
{scope:a})):(a.claim.imgList=[],w.hookShareAll(!1,v.getShareContent(a.claim),function(){},function(a){alert(a)}),f.hide())},function(a){alert("\u83b7\u53d6\u7406\u8d54\u4fe1\u606f\u5931\u8d25\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002");f.hide()})},z=null,t=!1;a.getlocation=function(){t=!1;f.show({template:"<ion-spinner></ion-spinner>",delay:100});var l=b(function(){0==t&&(f.hide(),alert("\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u5931\u8d25\u8bf7\u7a0d\u540e\u518d\u8bd5"))},6E3);w.getUserLocation(function(k){t=
!0;l&&b.cancel(l);var q=k.latitude;k=k.longitude;var g=new qq.maps.LatLng(q,k);a.claim.gpsAddress="\u7ecf\u5ea6:"+q+"\u7eac\u5ea6:"+k;z.getAddress(g)},function(a){f.hide();alert(a)})};a.previewImage=function(l){w.previewImage(l,a.claim.imgList,function(a){},function(a){alert(a)})};a.beginUpload=function(){if(void 0==a.claim.gpsAddressName||""==a.claim.gpsAddressName)alert("\u8bf7\u70b9\u51fb\u2018\u83b7\u53d6\u5730\u7406\u4f4d\u7f6e\u4fe1\u606f\u2019\u6309\u94ae\uff0c\u8bbe\u7f6e\u5f53\u524d\u4f4d\u7f6e\u4fe1\u606f\uff01");
else if(void 0==a.claim.imgList)alert("\u8bf7\u4f9d\u6b21\u9009\u62e9\u51719\u5f20\u7167\u7247\u8fdb\u884c\u4e0a\u4f20");else{var l=a.claim.imgList.length;9!=l&&alert("\u8bf7\u4f9d\u6b21\u9009\u62e9\u51719\u5f20\u7167\u7247\u8fdb\u884c\u4e0a\u4f20,\u5df2\u4e0a\u4f20"+l+"\u5f20 \u8fd8\u9700"+(9-l)+"\u5f20")}};a.uploadFile=function(l){w.chooseImage(function(k){a.claim.imgList[l]=k.toString();f.show({template:"<ion-spinner></ion-spinner>",delay:100});w.uploadImage(a.claim.imgList[l],function(q){v.downloadFile(a.claim.id,
q,l,function(g){f.hide();a.claim.imgList[l]=g.data;a.$apply()},function(a){f.hide()})},function(a){f.hide()})},function(a){alert(a)})};a.commitClaim=function(){f.show({template:"<ion-spinner></ion-spinner>",delay:100});v.saveClaim(a.claim,function(l){f.hide();a.claim=l.data;a.showhistoryrecord=!1;a.navtoroot("claimresult",{id:a.claim.transactionId,result:a.claim})},function(a){f.hide();alert("\u63d0\u4ea4\u62a5\u6848\u51fa\u73b0\u95ee\u9898\u8bf7\u7a0d\u540e\u518d\u8bd5\u3002")})};B.$on("$stateChangeStart",
function(a,k,q,g,c){if("claimupload"===k.name||"claimresult"===k.name)JSON.stringify(q.result.id),E(q.result.id)});JSON.stringify(h);E(h.id);(function(){z=new qq.maps.Geocoder({complete:function(l){f.hide();a.claim.gpsAddressName=l.detail.addressComponents.province==l.detail.addressComponents.city?l.detail.addressComponents.country+l.detail.addressComponents.province+l.detail.addressComponents.city+l.detail.addressComponents.district+l.detail.addressComponents.street+l.detail.addressComponents.streetNumber:
l.detail.addressComponents.country+l.detail.addressComponents.city+l.detail.addressComponents.district+l.detail.addressComponents.street+l.detail.addressComponents.streetNumber;a.$apply()}})})()}]).controller("PublicClaimListCtrl",["$scope","$stateParams","$state","$ionicLoading","$timeout","PublicClaimAPI","$ionicHistory","Wechat","$ionicPopup",function(a,h,n,f,b,v,A,w,y){b(function(){window.loading_screen.finish()},1500);(function(b){a.id=b.id;f.show({template:"<ion-spinner></ion-spinner>",delay:100});
v.getRecord(b,function(b){JSON.stringify(b);a.claimrecords=b;f.hide()},function(a){alert("error");f.hide()})})(h.id)}]);
angular.module("public.claim.service",["ngResource","wechat"]).service("PublicClaimAPI",["$resource","urlConfig","wechatConstants",function(a,h,n){var f=a(h.REST_END_POINT+"/api/public/claim/query/:id",{id:"@id"},{query:{method:"GET",isArray:!1,timeout:1E4}},null),b=a(h.REST_END_POINT+"/api/public/claim/downloadFile/:Id/:fileId/:fileIndex",{transtionId:"@transtionId",fileId:"@fileId",fileIndex:"@fileIndex"},{query:{method:"GET",isArray:!1,timeout:1E4}},null),v=a(h.REST_END_POINT+"/api/public/claim/save",
null,{save:{method:"POST",isArray:!1,timeout:1E4}},null);return{get:function(a,b,h){f.query({id:a},function(a){b(a.data)},function(a){h(a.error)})},saveClaim:function(a,b,f){v.save(a,function(a){b(a)},function(a){f(a)})},downloadFile:function(a,f,h,n,v){b.query({Id:a,fileId:f,fileIndex:h},function(a){n(a)},function(a){v(a)})},getShareUrl:function(a){return h.APP_ROOT+n.CLAIM_SHARE_ROOT+a},getShareContent:function(a){var b={name:"[\u5927\u5723\u4fdd\u9669]\u7533\u8bf7\u7406\u8d54"};b.description="\u8bf7\u4e0a\u4f20\u4fdd\u5355[\u4fdd\u5355\u53f7:"+
a.policyno+"]\u7406\u8d54\u6240\u9700\u6750\u6599";b.url=this.getShareUrl(a.id);return b}}}]);angular.module("emessage-public","ionic ngCookies angular.filter monospaced.qrcode public wechat redirect templates".split(" ")).constant("urlConfig",{REST_END_POINT:"http://m.baoxian72.com/API",APP_ROOT:"http://m.baoxian72.com"}).run(["$ionicPlatform",function(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0));window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider",
"$urlRouterProvider","$ionicConfigProvider",function(a,h,n){a.state("redirect",{url:"/redirect?providerUserId&mobile&xAuthToken&state&detail",template:"",controller:"RedirectCtrl"}).state("public",{url:"/public",template:'<ion-nav-view name="publicContent" class="public"></ion-nav-view>',controller:"PublicCtrl"}).state("public.promotion",{url:"/promotion/:id",views:{publicContent:{templateUrl:"templates/public/promotion.html",controller:"PublicPromotionCtrl"}}}).state("public.survey",{url:"/survey/:id",
views:{publicContent:{templateUrl:"templates/public/survey.html",controller:"PublicSurveyCtrl"}}}).state("public.claimupload",{url:"/claim/:id",views:{publicContent:{templateUrl:"templates/public/claim.upload.html",controller:"PublicClaimCtrl"}},params:{id:null,result:null}}).state("public.claimresult",{url:"/claim/:id",views:{publicContent:{templateUrl:"templates/public/claim.result.html",controller:"PublicClaimCtrl"}},params:{id:null,result:null}});h.otherwise("/app/agreement/?toPropose=1&paygo=1&private=0");
n.views.transition("none")}]);angular.module("public.promotion",["public.promotion.service","smsValidation"]).controller("PublicPromotionCtrl",["$scope","$stateParams","$state","$ionicLoading","$ionicHistory","PublicPromotionAPI","PublicPromotionConstants","PromotionBackgroundColors","Wechat","CommonAuthenticationService",function(a,h,n,f,b,v,A,w,y,B){a.statusCode={"new":0,waitAuth:1,success:2,error:10};var F=function(a){return void 0!==w[a.toPicId]?{"background-color":w[a.toPicId]}:{"background-color":"#FFF"}},E=function(){f.show({template:"<ion-spinner></ion-spinner>",
delay:100});v.success(a.batch.id,function(b){a.status.code=a.statusCode.success;a.mobile=B.getMobile();f.hide()},function(b){409===b.status?(a.status.code=a.statusCode.success,a.mobile=B.getMobile(),a.batch.isOwner=b.data.isOwner,a.batch.isCollected=b.data.isCollected):alert(b.data.error);f.hide()})};(function(b){a.status={};f.show({template:"<ion-spinner></ion-spinner>",delay:100});v.get(b,function(b){f.hide();a.batch=b;a.batch.isCollected||a.batch.isOwner?(a.status.code=a.statusCode.success,a.mobile=
B.getMobile()):a.status.code=a.statusCode["new"];a.batch.toPicUrl=v.getPicUrl(a.batch.toPicId);a.backStyle=F(a.batch);A.ACTION_COLLECT===a.batch.toAction&&(a.isBindCoupon=!0);y.hookShareAll(!1,v.convertBatchToContent(a.batch),function(){},function(a){alert(a)})},function(b){f.hide();a.status.code=a.statusCode.error;alert(b.data.error)})})(h.id);a.success=function(){B.isLoggedIn()?E():a.status.code=a.statusCode.waitAuth};a.changeMobile=function(){B.quit();a.status.code=a.statusCode.waitAuth;a.batch.isCollected=
!1;a.batch.isOwner=!1}}]);
angular.module("public.promotion.service",["ngResource","wechat"]).constant("PublicPromotionConstants",{ACTION_COLLECT:"COLLECT",PIC_ROOT:"img/promotion/"}).constant("PromotionBackgroundColors",{"16036acd775e970991e0677af90449f4":"#FFF",a3fb6acd775e77af90449f4970991e06:"#FFF",a3fb6acd775e970991e0677af90449f4:"#FFF","16046acd775e970991e0677af90449f4":"#FFF",a3fb6acd775e77af90449f4970991e56:"#FFF"}).service("PublicPromotionAPI",["$resource","urlConfig","PublicPromotionConstants","wechatConstants",function(a,
h,n,f){var b=a(h.REST_END_POINT+"/api/public/marketing/promotion/:batchId/",{batchId:"@batchId"}),v=a(h.REST_END_POINT+"/api/marketing/promotion/batch/:batchId",{batchId:"@batchId"});return{get:function(a,f,h){b.get({batchId:a},function(a){f(a)},function(a){h(a)})},success:function(a,b,f){v.save({batchId:a},function(a){b(a)},function(a){f(a)})},getPicUrl:function(a){return n.PIC_ROOT+a+"_to.jpg"},getShareUrl:function(a){return h.REST_END_POINT+f.PROMOTION_SHARE_ROOT+a},convertBatchToContent:function(a){var b=
{};b.name=a.toTitle;b.description=a.toDescription;b.url=this.getShareUrl(a.id);return b}}}]);angular.module("redirect",["wechat"]).controller("RedirectCtrl",["$stateParams","$state","$ionicHistory","CommonAuthenticationService","Wechat",function(a,h,n,f,b){void 0!==a.providerUserId&&"null"!==a.providerUserId&&b.setOpenId(a.providerUserId);void 0!=a.xAuthToken&&(f.setXAuthToken(a.xAuthToken),f.setMobile(a.mobile));n.nextViewOptions({historyRoot:!0});"promotion"===a.state?h.go("public.promotion",{id:a.detail}):"survey"===a.state?h.go("public.survey",{id:a.detail}):alert("\u670d\u52a1\u51fa\u73b0\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u6216\u7a0d\u540e\u518d\u8bd5")}]);angular.module("public.survey",["public.survey.service","public.promotion.service"]).controller("PublicSurveyCtrl",["$scope","$stateParams","$state","$ionicLoading","PublicSurveyAPI","PublicPromotionAPI","$timeout","Wechat","CommonAuthenticationService",function(a,h,n,f,b,v,A,w,y){a.statusCode={"new":0,waitAuth:1,submitted:2,error:10};var B=function(){f.show({template:"<ion-spinner></ion-spinner>",delay:100});b.submit(a.survey.id,a.answers,function(b){a.status.code=a.statusCode.submitted;a.mobile=
y.getMobile();f.hide()},function(b){409===b.status?(a.status.code=a.statusCode.submitted,a.mobile=y.getMobile(),alert("\u60a8\u5df2\u7ecf\u56de\u7b54\u8fc7\u672c\u6708\u95ee\u5377\uff0c\u6bcf\u67081\u65e5\u5237\u65b0\uff0c\u8bf7\u6301\u7eed\u5173\u6ce8~")):alert(b.data.error);f.hide()})};(function(h){a.status={};f.show({template:"<ion-spinner></ion-spinner>",delay:100});b.get(h,function(h){f.hide();a.survey=h;a.survey.answeredBy?(a.status.code=a.statusCode.submitted,a.mobile=y.getMobile()):a.status.code=
a.statusCode["new"];a.survey.promotion.toPicUrl=v.getPicUrl(a.survey.promotion.toPicId);a.answers={};w.hookShareAll(!1,b.getShareContent(a.survey),function(){},function(a){alert(a)})},function(b){f.hide();a.survey=b;a.status.code=a.statusCode.error})})(h.id);a.submit=function(){var b;a:{for(b in a.survey.questions)if((1===a.survey.questions[b].type||2===a.survey.questions[b].type)&&void 0===a.answers[a.survey.questions[b].id]){b=!1;break a}b=!0}b?y.isLoggedIn()?B():a.status.code=a.statusCode.waitAuth:
alert("\u95ee\u5377\u672a\u5b8c\u6210\uff0c\u8bf7\u5b8c\u6210\u7b54\u5377\u518d\u63d0\u4ea4\u3002")};a.changeMobile=function(){y.quit();a.status.code=a.statusCode["new"];a.survey.answeredBy=void 0}}]);
angular.module("public.survey.service",["ngResource","wechat"]).service("PublicSurveyAPI",["$resource","urlConfig","wechatConstants",function(a,h,n){var f=a(h.REST_END_POINT+"/api/public/marketing/survey/:surveyId",{surveyId:"@surveyId"}),b=a(h.REST_END_POINT+"/api/marketing/survey/:surveyId/answer",{surveyId:"@surveyId"});return{get:function(a,b,h){f.get({surveyId:a},function(a){b(a)},function(a){h(a.data)})},submit:function(a,f,h,n){b.save({surveyId:a,answers:f},function(a){h(a)},function(a){n(a)})},
getShareUrl:function(a){return h.APP_ROOT+n.SURVEY_SHARE_ROOT+a},getShareContent:function(a){var b={name:"[\u5927\u5723\u4fdd\u9669]\u7b54\u5377\u6709\u5956"};b.description=a.name;b.url=this.getShareUrl(a.id);return b}}}]);angular.module("common-authentication",["wechat"]).service("CommonAuthenticationService",["$resource","$rootScope","$http","urlConfig","Wechat",function(a,h,n,f,b){var v=a(f.REST_END_POINT+"/sso/userCanRegister/:id",{id:"@id"},{check:{method:"GET",isArray:!1}},null),A=function(a){n.defaults.headers.common["x-auth-token"]=a},w=function(a,h,v,w,t){var l=b.getOpenId();void 0===l&&(l="");void 0==v&&(v="");n.post(f.REST_END_POINT+"/auth","mobile="+a+"&validationCode="+h+"&invitationCode="+v+"&providerUserId="+
l,{ignoreAuthModule:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a,q,g,c){A(a.xAuthToken);y=a.mobile;w(a)}).error(function(a,q,g,c){t(a.error)})},y;return{isLoggedIn:function(){return void 0!==n.defaults.headers.common["x-auth-token"]},exist:function(a,b,f){v.check({id:a},b,f)},auth:function(a,b,f,h,t){w(a,b,f,h,t)},quit:function(a){n.post(f.REST_END_POINT+"/sso/quit",{},{ignoreAuthModule:!0})["finally"](function(){delete n.defaults.headers.common["x-auth-token"];
y=void 0;a()})},setXAuthToken:function(a){A(a)},getXAuthToken:function(){return n.defaults.headers.common["x-auth-token"]},setMobile:function(a){y=a},getMobile:function(){return y},clean:function(){y=n.defaults.headers.common["x-auth-token"]=void 0}}}]);angular.module("ng-iscroll",[]).service("iScrollAccessor",function(){var a;return{set:function(h){a=h},get:function(){return a}}}).directive("iScroll",["iScrollAccessor",function(a){return{restrict:"A",link:function(h,n){var f=new IScroll(n[0],{click:!0,bounce:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/,isContentEditable:/^true$/}});a.set(f);n.on("$destroy",function(){f.destroy();f=null})}}}]).directive("iScrollRefresh",["iScrollAccessor","$timeout",function(a,h){return{restrict:"A",
link:function(n){n.$last&&h(function(){a.get().refresh()})}}}]);var qrcode=function(){function a(f,l){if("undefined"==typeof f.length)throw Error(f.length+"/"+l);var k=function(){for(var a=0;a<f.length&&0==f[a];)a+=1;for(var c=Array(f.length-a+l),e=0;e<f.length-a;e+=1)c[e]=f[e+a];return c}(),q={getAt:function(a){return k[a]},getLength:function(){return k.length},multiply:function(g){for(var c=Array(q.getLength()+g.getLength()-1),e=0;e<q.getLength();e+=1)for(var d=0;d<g.getLength();d+=1)c[e+d]^=b.gexp(b.glog(q.getAt(e))+b.glog(g.getAt(d)));return a(c,0)},mod:function(g){if(0>
q.getLength()-g.getLength())return q;for(var c=b.glog(q.getAt(0))-b.glog(g.getAt(0)),e=Array(q.getLength()),d=0;d<q.getLength();d+=1)e[d]=q.getAt(d);for(d=0;d<g.getLength();d+=1)e[d]^=b.gexp(b.glog(g.getAt(d))+c);return a(e,0).mod(g)}};return q}var h=function(b,l){var k=n[l],q=null,g=0,c=null,e=[],d={},m=function(d,l){for(var r=g=4*b+17,p=Array(r),m=0;m<r;m+=1){p[m]=Array(r);for(var t=0;t<r;t+=1)p[m][t]=null}q=p;h(0,0);h(g-7,0);h(0,g-7);r=f.getPatternPosition(b);for(p=0;p<r.length;p+=1)for(m=0;m<
r.length;m+=1){var t=r[p],C=r[m];if(null==q[t][C])for(var n=-2;2>=n;n+=1)for(var u=-2;2>=u;u+=1)q[t+n][C+u]=-2==n||2==n||-2==u||2==u||0==n&&0==u?!0:!1}for(r=8;r<g-8;r+=1)null==q[r][6]&&(q[r][6]=0==r%2);for(r=8;r<g-8;r+=1)null==q[6][r]&&(q[6][r]=0==r%2);r=f.getBCHTypeInfo(k<<3|l);for(p=0;15>p;p+=1)m=!d&&1==(r>>p&1),6>p?q[p][8]=m:8>p?q[p+1][8]=m:q[g-15+p][8]=m;for(p=0;15>p;p+=1)m=!d&&1==(r>>p&1),8>p?q[8][g-p-1]=m:9>p?q[8][15-p-1+1]=m:q[8][15-p-1]=m;q[g-8][8]=!d;if(7<=b){r=f.getBCHTypeNumber(b);for(p=
0;18>p;p+=1)m=!d&&1==(r>>p&1),q[Math.floor(p/3)][p%3+g-8-3]=m;for(p=0;18>p;p+=1)m=!d&&1==(r>>p&1),q[p%3+g-8-3][Math.floor(p/3)]=m}if(null==c){r=v.getRSBlocks(b,k);p=A();for(m=0;m<e.length;m+=1)t=e[m],p.put(t.getMode(),4),p.put(t.getLength(),f.getLengthInBits(t.getMode(),b)),t.write(p);for(m=t=0;m<r.length;m+=1)t+=r[m].dataCount;if(p.getLengthInBits()>8*t)throw Error("code length overflow. ("+p.getLengthInBits()+">"+8*t+")");for(p.getLengthInBits()+4<=8*t&&p.put(0,4);0!=p.getLengthInBits()%8;)p.putBit(!1);
for(;!(p.getLengthInBits()>=8*t);){p.put(236,8);if(p.getLengthInBits()>=8*t)break;p.put(17,8)}for(var D=0,t=m=0,C=Array(r.length),n=Array(r.length),u=0;u<r.length;u+=1){var w=r[u].dataCount,y=r[u].totalCount-w,m=Math.max(m,w),t=Math.max(t,y);C[u]=Array(w);for(var x=0;x<C[u].length;x+=1)C[u][x]=255&p.getBuffer()[x+D];D+=w;x=f.getErrorCorrectPolynomial(y);w=a(C[u],x.getLength()-1).mod(x);n[u]=Array(x.getLength()-1);for(x=0;x<n[u].length;x+=1)y=x+w.getLength()-n[u].length,n[u][x]=0<=y?w.getAt(y):0}for(x=
p=0;x<r.length;x+=1)p+=r[x].totalCount;p=Array(p);for(x=D=0;x<m;x+=1)for(u=0;u<r.length;u+=1)x<C[u].length&&(p[D]=C[u][x],D+=1);for(x=0;x<t;x+=1)for(u=0;u<r.length;u+=1)x<n[u].length&&(p[D]=n[u][x],D+=1);c=p}r=c;p=-1;m=g-1;t=7;C=0;n=f.getMaskFunction(l);for(u=g-1;0<u;u-=2)for(6==u&&--u;;){for(x=0;2>x;x+=1)null==q[m][u-x]&&(D=!1,C<r.length&&(D=1==(r[C]>>>t&1)),n(m,u-x)&&(D=!D),q[m][u-x]=D,--t,-1==t&&(C+=1,t=7));m+=p;if(0>m||g<=m){m-=p;p=-p;break}}},h=function(a,c){for(var e=-1;7>=e;e+=1)if(!(-1>=a+
e||g<=a+e))for(var b=-1;7>=b;b+=1)-1>=c+b||g<=c+b||(q[a+e][c+b]=0<=e&&6>=e&&(0==b||6==b)||0<=b&&6>=b&&(0==e||6==e)||2<=e&&4>=e&&2<=b&&4>=b?!0:!1)};d.addData=function(a){a=w(a);e.push(a);c=null};d.isDark=function(a,e){if(0>a||g<=a||0>e||g<=e)throw Error(a+","+e);return q[a][e]};d.getModuleCount=function(){return g};d.make=function(){for(var a=0,e=0,c=0;8>c;c+=1){m(!0,c);var b=f.getLostPoint(d);if(0==c||a>b)a=b,e=c}m(!1,e)};d.createTableTag=function(a,e){a=a||2;var c;c='<table style=" border-width: 0px; border-style: none; border-collapse: collapse;'+
(" padding: 0px; margin: "+("undefined"==typeof e?4*a:e)+"px;")+'"><tbody>';for(var b=0;b<d.getModuleCount();b+=1){c+="<tr>";for(var g=0;g<d.getModuleCount();g+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+a+"px;",c+=" height: "+a+"px;",c+=" background-color: ",c+=d.isDark(b,g)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+"</tbody></table>"};d.createSvgTag=function(a,c){a=a||2;c="undefined"==
typeof c?4*a:c;var e=d.getModuleCount()*a+2*c,b,g,q,m,l;l="l"+a+",0 0,"+a+" -"+a+",0 0,-"+a+"z ";m="<svg"+(' width="'+e+'px"')+(' height="'+e+'px"')+' xmlns="http://www.w3.org/2000/svg">';m+='<path d="';for(g=0;g<d.getModuleCount();g+=1)for(q=g*a+c,e=0;e<d.getModuleCount();e+=1)d.isDark(g,e)&&(b=e*a+c,m+="M"+b+","+q+l);m+='" stroke="transparent" fill="black"/>';return m+="</svg>"};d.createImgTag=function(a,c){a=a||2;c="undefined"==typeof c?4*a:c;var e=d.getModuleCount()*a+2*c,b=c,g=e-c;return z(e,
e,function(c,e){return b<=c&&c<g&&b<=e&&e<g?d.isDark(Math.floor((e-b)/a),Math.floor((c-b)/a))?0:1:1})};return d};h.stringToBytes=function(a){for(var b=[],k=0;k<a.length;k+=1){var q=a.charCodeAt(k);b.push(q&255)}return b};h.createStringToBytes=function(a,b){var k=function(){for(var q=F(a),g=function(){var a=q.read();if(-1==a)throw Error();return a},c=0,e={};;){var d=q.read();if(-1==d)break;var m=g(),k=g(),l=g(),d=String.fromCharCode(d<<8|m);e[d]=k<<8|l;c+=1}if(c!=b)throw Error(c+" != "+b);return e}();
return function(a){for(var b=[],c=0;c<a.length;c+=1){var e=a.charCodeAt(c);128>e?b.push(e):(e=k[a.charAt(c)],"number"==typeof e?(e&255)==e?b.push(e):(b.push(e>>>8),b.push(e&255)):b.push(63))}return b}};var n={L:1,M:0,Q:3,H:2},f=function(){var f=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,
80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],l={},k=function(a){for(var b=0;0!=a;)b+=1,a>>>=1;return b};l.getBCHTypeInfo=function(a){for(var b=a<<10;0<=k(b)-k(1335);)b^=1335<<k(b)-k(1335);return(a<<
10|b)^21522};l.getBCHTypeNumber=function(a){for(var b=a<<12;0<=k(b)-k(7973);)b^=7973<<k(b)-k(7973);return a<<12|b};l.getPatternPosition=function(a){return f[a-1]};l.getMaskFunction=function(a){switch(a){case 0:return function(a,c){return 0==(a+c)%2};case 1:return function(a,c){return 0==a%2};case 2:return function(a,c){return 0==c%3};case 3:return function(a,c){return 0==(a+c)%3};case 4:return function(a,c){return 0==(Math.floor(a/2)+Math.floor(c/3))%2};case 5:return function(a,c){return 0==a*c%2+
a*c%3};case 6:return function(a,c){return 0==(a*c%2+a*c%3)%2};case 7:return function(a,c){return 0==(a*c%3+(a+c)%2)%2};default:throw Error("bad maskPattern:"+a);}};l.getErrorCorrectPolynomial=function(q){for(var g=a([1],0),c=0;c<q;c+=1)g=g.multiply(a([1,b.gexp(c)],0));return g};l.getLengthInBits=function(a,b){if(1<=b&&10>b)switch(a){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw Error("mode:"+a);}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case 4:return 16;
case 8:return 10;default:throw Error("mode:"+a);}else if(41>b)switch(a){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+a);}else throw Error("type:"+b);};l.getLostPoint=function(a){for(var b=a.getModuleCount(),c=0,e=0;e<b;e+=1)for(var d=0;d<b;d+=1){for(var m=0,q=a.isDark(e,d),k=-1;1>=k;k+=1)if(!(0>e+k||b<=e+k))for(var l=-1;1>=l;l+=1)0>d+l||b<=d+l||0==k&&0==l||q!=a.isDark(e+k,d+l)||(m+=1);5<m&&(c+=3+m-5)}for(e=0;e<b-1;e+=1)for(d=0;d<b-1;d+=1)if(m=0,a.isDark(e,
d)&&(m+=1),a.isDark(e+1,d)&&(m+=1),a.isDark(e,d+1)&&(m+=1),a.isDark(e+1,d+1)&&(m+=1),0==m||4==m)c+=3;for(e=0;e<b;e+=1)for(d=0;d<b-6;d+=1)a.isDark(e,d)&&!a.isDark(e,d+1)&&a.isDark(e,d+2)&&a.isDark(e,d+3)&&a.isDark(e,d+4)&&!a.isDark(e,d+5)&&a.isDark(e,d+6)&&(c+=40);for(d=0;d<b;d+=1)for(e=0;e<b-6;e+=1)a.isDark(e,d)&&!a.isDark(e+1,d)&&a.isDark(e+2,d)&&a.isDark(e+3,d)&&a.isDark(e+4,d)&&!a.isDark(e+5,d)&&a.isDark(e+6,d)&&(c+=40);for(d=m=0;d<b;d+=1)for(e=0;e<b;e+=1)a.isDark(e,d)&&(m+=1);return c+Math.abs(100*
m/b/b-50)/5*10};return l}(),b=function(){for(var a=Array(256),b=Array(256),k=0;8>k;k+=1)a[k]=1<<k;for(k=8;256>k;k+=1)a[k]=a[k-4]^a[k-5]^a[k-6]^a[k-8];for(k=0;255>k;k+=1)b[a[k]]=k;return{glog:function(a){if(1>a)throw Error("glog("+a+")");return b[a]},gexp:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return a[b]}}}(),v=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,
134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],
[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],
[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,
74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,
35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],
[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b=function(a,b){var c={};c.totalCount=a;c.dataCount=b;return c},k={},f=function(b,c){switch(c){case n.L:return a[4*(b-1)+0];case n.M:return a[4*(b-1)+1];case n.Q:return a[4*(b-1)+2];case n.H:return a[4*(b-1)+3]}};k.getRSBlocks=function(a,c){var e=f(a,c);if("undefined"==typeof e)throw Error("bad rs block @ typeNumber:"+
a+"/errorCorrectLevel:"+c);for(var d=e.length/3,m=[],k=0;k<d;k+=1)for(var l=e[3*k+0],g=e[3*k+1],q=e[3*k+2],h=0;h<l;h+=1)m.push(b(g,q));return m};return k}(),A=function(){var a=[],b=0,k={getBuffer:function(){return a},getAt:function(b){return 1==(a[Math.floor(b/8)]>>>7-b%8&1)},put:function(a,b){for(var c=0;c<b;c+=1)k.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return b},putBit:function(k){var g=Math.floor(b/8);a.length<=g&&a.push(0);k&&(a[g]|=128>>>b%8);b+=1}};return k},w=function(a){var b=
h.stringToBytes(a);return{getMode:function(){return 4},getLength:function(a){return b.length},write:function(a){for(var k=0;k<b.length;k+=1)a.put(b[k],8)}}},y=function(){var a=[],b={writeByte:function(b){a.push(b&255)},writeShort:function(a){b.writeByte(a);b.writeByte(a>>>8)},writeBytes:function(a,f,g){f=f||0;g=g||a.length;for(var c=0;c<g;c+=1)b.writeByte(a[c+f])},writeString:function(a){for(var k=0;k<a.length;k+=1)b.writeByte(a.charCodeAt(k))},toByteArray:function(){return a},toString:function(){var b;
b="[";for(var f=0;f<a.length;f+=1)0<f&&(b+=","),b+=a[f];return b+"]"}};return b},B=function(){var a=0,b=0,f=0,h="",g={},c=function(a){if(!(0>a)){if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw Error("n:"+a);};g.writeByte=function(e){a=a<<8|e&255;b+=8;for(f+=1;6<=b;)h+=String.fromCharCode(c(a>>>b-6&63)),b-=6};g.flush=function(){0<b&&(h+=String.fromCharCode(c(a<<6-b&63)),b=a=0);if(0!=f%3)for(var e=3-f%3,d=0;d<e;d+=1)h+="="};g.toString=
function(){return h};return g},F=function(a){var b=0,f=0,h=0,g=function(a){if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-97+26;if(48<=a&&57>=a)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw Error("c:"+a);};return{read:function(){for(;8>h;){if(b>=a.length){if(0==h)return-1;throw Error("unexpected end of file./"+h);}var c=a.charAt(b);b+=1;if("="==c)return h=0,-1;c.match(/^\s$/)||(f=f<<6|g(c.charCodeAt(0)),h+=6)}c=f>>>h-8&255;h-=8;return c}}},E=function(a,b){var f=Array(a*b),h=function(a){var b=
0,c=0;return{write:function(e,d){if(0!=e>>>d)throw Error("length over");for(;8<=b+d;)a.writeByte(255&(e<<b|c)),d-=8-b,e>>>=8-b,b=c=0;c|=e<<b;b+=d},flush:function(){0<b&&a.writeByte(c)}}},g=function(){var a={},b=0,d={add:function(c){if(d.contains(c))throw Error("dup key:"+c);a[c]=b;b+=1},size:function(){return b},indexOf:function(b){return a[b]},contains:function(b){return"undefined"!=typeof a[b]}};return d};return{setPixel:function(b,e,d){f[e*a+b]=d},write:function(c){c.writeString("GIF87a");c.writeShort(a);
c.writeShort(b);c.writeByte(128);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(255);c.writeByte(255);c.writeByte(255);c.writeString(",");c.writeShort(0);c.writeShort(0);c.writeShort(a);c.writeShort(b);c.writeByte(0);var e;e=3;for(var d=g(),m=0;4>m;m+=1)d.add(String.fromCharCode(m));d.add(String.fromCharCode(4));d.add(String.fromCharCode(5));var m=y(),k=h(m);k.write(4,e);for(var l=0,n=String.fromCharCode(f[l]),l=l+1;l<f.length;){var q=String.fromCharCode(f[l]),
l=l+1;d.contains(n+q)?n+=q:(k.write(d.indexOf(n),e),4095>d.size()&&(d.size()==1<<e&&(e+=1),d.add(n+q)),n=q)}k.write(d.indexOf(n),e);k.write(5,e);k.flush();e=m.toByteArray();c.writeByte(2);for(d=0;255<e.length-d;)c.writeByte(255),c.writeBytes(e,d,255),d+=255;c.writeByte(e.length-d);c.writeBytes(e,d,e.length-d);c.writeByte(0);c.writeString(";")}}},z=function(a,b,f,h){for(var g=E(a,b),c=0;c<b;c+=1)for(var e=0;e<a;e+=1)g.setPixel(e,c,f(e,c));f=y();g.write(f);g=B();f=f.toByteArray();for(c=0;c<f.length;c+=
1)g.writeByte(f[c]);g.flush();g='<img src="data:image/gif;base64,'+g+'" width="';g+=a;g+='"';g+=' height="';g+=b;g+='"';h&&(g+=' alt="',g+=h,g+='"');return g+="/>"};return h}();(function(a){"function"===typeof define&&define.amd?define([],a):"object"===typeof exports&&(module.exports=a())})(function(){return qrcode});
(function(a){a.stringToBytes=function(a){for(var h=[],f=0;f<a.length;f++){var b=a.charCodeAt(f);128>b?h.push(b):2048>b?h.push(192|b>>6,128|b&63):55296>b||57344<=b?h.push(224|b>>12,128|b>>6&63,128|b&63):(f++,b=65536+((b&1023)<<10|a.charCodeAt(f)&1023),h.push(240|b>>18,128|b>>12&63,128|b>>6&63,128|b&63))}return h}})(qrcode);angular.module("smsValidation",["ngResource","common-authentication"]).directive("smsValidation",["$ionicLoading","smsValidationAPI","$interval","CommonAuthenticationService",function(a,h,n,f){return{restrict:"E",scope:{presetInvitationCode:"=presetInvitationCode",success:"&onSuccess"},templateUrl:"templates/common/sms.validation.html",link:function(b){b.statusCode={waitMobile:0,waitCode:1};b.status=b.statusCode.waitMobile;b.showInvitationCode=!1;var v,A=function(a){b.count=60;angular.isDefined(v)||
(v=n(function(){1<b.count?--b.count:(angular.isDefined(v)&&(n.cancel(v),v=void 0),a())},1E3))},w=function(){a.show({template:"<ion-spinner></ion-spinner>",delay:100});h.send(b.mobile,b.captcha,function(){a.hide();b.status=b.statusCode.waitCode;A(function(){b.status===b.statusCode.waitCode&&(b.status.code=b.statusCode.waitMobile)})},function(f){a.hide();b.refreshCaptcha();b.captcha=void 0;alert(f.data.error)})};b.sendSmsValidation=function(){void 0===b.mobile?alert("\u8bf7\u6b63\u786e\u8f93\u5165\u624b\u673a\u53f7"):
void 0===b.captcha?alert("\u8bf7\u6b63\u786e\u8f93\u5165\u56fe\u7247\u9a8c\u8bc1\u7801"):w()};b.refreshCaptcha=function(){b.showCaptcha=!0;void 0!==b.mobile&&(b.captchaUrl=h.getCaptchaUrl(b.mobile))};b.checkExist=function(){b.showInvitationCode=!1;void 0!==b.mobile&&f.exist(b.mobile,function(){b.showInvitationCode=!1},function(){b.showInvitationCode=!0})};b.auth=function(){f.auth(b.mobile,b.validationCode,void 0!==b.presetInvitationCode?b.presetInvitationCode:b.invitationCode,function(a){b.success()},
function(a){alert(a)})}}}}]).service("smsValidationAPI",["$resource","urlConfig",function(a,h){var n=a(h.REST_END_POINT+"/sso/smsValidate",{phoneNumber:"@phoneNumber",captcha:"@captcha"},{send:{method:"POST",isArray:!1}},null);return{send:function(a,b,h,A){n.send({phoneNumber:a,captcha:b},function(){h()},function(a){A(a)})},getCaptchaUrl:function(a){return h.REST_END_POINT+"/sso/captcha?phoneNumber="+a+"&time="+(new Date).getTime()}}}]);angular.module("wechat",["wechat.service"]);
angular.module("wechat.service",[]).constant("wechatConstants",{SHARE_IMG_URL:"img/promotion/share.png",TIMELINE_IMG_URL:"img/promotion/share.png",PROMOTION_SHARE_ROOT:"/wechatlogin/oauth2?state=promotion:",SURVEY_SHARE_ROOT:"/wechatlogin/oauth2?state=survey:",CLAIM_SHARE_ROOT:"/#/claim/"}).service("Wechat",["urlConfig","$resource","$location","wechatConstants",function(a,h,n,f){var b,v=h(a.REST_END_POINT+"/api/wechat/config",{url:"@url"}),A=h(a.REST_END_POINT+"/wechatlogin/oauth2/bind",{openId:"@openId"}),
w=function(a,b,d){var c=new v;a=a?n.protocol()+"://"+n.host()+"/":n.absUrl();c.$get({url:a},function(a){g=a;console.log("refresh wechat mp config success");b()},function(a){g=void 0;console.log("refresh wechat mp config error by: "+a.data.error);d(a)})},y=function(a,b,d){wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:function(a){b(a.localIds)}})},B=function(a,b,d){wx.uploadImage({localId:a,isShowProgressTips:1,success:function(a){b(a.serverId)}})},F=function(a,
b,d){wx.getLocation({type:"gcj02",success:function(a){b(a)},cancel:function(a){d(a)}})},E=function(a,b,d,f){wx.previewImage({current:b[a],urls:b})},z=function(a,b,d,f){wx.config({debug:!1,appId:g.appId,timestamp:g.timestamp,nonceStr:g.noncestr,signature:g.signature,jsApiList:"onMenuShareAppMessage onMenuShareTimeline chooseWXPay chooseImage uploadImage getLocation previewImage hideMenuItems".split(" ")});wx.ready(function(){a(b,d,f)})},t=function(b,e,d,g){b&&wx.hideMenuItems({menuList:["menuItem:share:appMessage"]});
wx.onMenuShareAppMessage({title:e.name,desc:e.description,link:e.url,imgUrl:a.APP_ROOT+"/"+f.SHARE_IMG_URL,trigger:function(a){},success:function(a){d()},cancel:function(a){g("\u5df2\u53d6\u6d88\u5206\u4eab")},fail:function(a){g("\u5206\u4eab\u5931\u8d25")}});wx.onMenuShareTimeline({title:e.name,link:e.url,imgUrl:a.APP_ROOT+"/"+f.TIMELINE_IMG_URL,trigger:function(a){},success:function(a){d()},cancel:function(a){g("\u5df2\u53d6\u6d88\u5206\u4eab")},fail:function(a){g("\u5206\u4eab\u5931\u8d25")}})},
l=function(a,b,d){t(!0,a,b,d)},k=function(a,b,d){t(!1,a,b,d)},q=function(a,b,d){wx.chooseWXPay({timestamp:a.timeStamp+"",nonceStr:a.nonceStr,"package":a.packagePrepayId,signType:a.signType,paySign:a.paySign,success:function(a){b()},fail:function(a){d()},cancel:function(a){d()}})},g;return{hookShareAll:function(a,b,d,f){void 0===g?w(a,function(){z(k,b,d,f)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):z(k,b,d,f)},hookShareTimelineOnly:function(a,
b,d,f){void 0===g?w(a,function(){z(l,b,d,f)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):z(l,b,d,f)},doWxPay:function(a,b,d){void 0===g?w(!0,function(){z(q,a,b,d)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):z(q,a,b,d)},chooseImage:function(a,b){void 0===g?w(!0,function(){z(y,"",a,b)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):
z(y,"",a,b)},previewImage:function(a,b,d,f){void 0===g?w(!0,function(){z(E,a,b,d,f)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):z(E,a,b,d,f)},getUserLocation:function(a,b){void 0===g?w(!0,function(){z(F,"",a,b)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):z(F,"",a,b)},uploadImage:function(a,b,d){void 0===g?w(!0,function(){z(B,a,b,d)},function(a){alert("\u5fae\u4fe1\u73af\u5883\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u6253\u5f00\u9875\u9762")}):
z(B,a,b,d)},isQQBrowser:function(){return-1!==navigator.userAgent.indexOf("MQQBrowser")},bind:function(a,b,d){(new A).$save({openId:a},b,function(a){d(a.data.error)})},getOpenId:function(){return b},setOpenId:function(a){b=a}}}]);
